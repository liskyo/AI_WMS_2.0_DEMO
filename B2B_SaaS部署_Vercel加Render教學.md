# AI WMS 2.0 - é›¶æˆæœ¬èµ·æ­¥ B2B SaaS é›²ç«¯éƒ¨ç½²æ•™å­¸ (Vercel + Render)

é€™å¥—æ¶æ§‹å°ˆç‚ºã€Œä¸æƒ³è¢«å…¬å¸ä¸»æ©Ÿç¶æ­»ã€åˆæœŸä¸æƒ³èŠ±å¤§éŒ¢ç§Ÿä¼ºæœå™¨ã€ä½†åˆæƒ³è³£çµ¦å¤šå®¶å·¥å» ã€çš„é–‹ç™¼è€…è¨­è¨ˆã€‚
æˆ‘å€‘å°‡å‰ç«¯è¨—ç®¡åœ¨å…è²»ä¸”æ¥µé€Ÿçš„ **Vercel**ï¼ŒæŠŠå«æœ‰è³‡æ–™åº« (SQLite) çš„å¾Œç«¯æ”¾ä¸Šæ”¯æ´æŒä¹…åŒ–ç¡¬ç¢Ÿçš„ **Render**ã€‚

---

## ç‚ºä»€éº¼é¸é€™å…©å€‹å¹³å°ï¼Ÿ

| å¹³å° | è² è²¬é …ç›® | è²»ç”¨ | å„ªå‹¢èˆ‡ç‰¹è‰² |
| :--- | :--- | :--- | :--- |
| **Vercel** | å‰ç«¯ (`client` è³‡æ–™å¤¾) | **æ°¸ä¹…å…è²»** | å°ˆç‚º React/Vite æ‰“é€ ï¼Œå…¨çƒ CDN æ¥µé€Ÿè¼‰å…¥ã€‚è‡ªå‹•ç¶å®š SSL æ†‘è­‰ï¼Œé›¶è¨­å®šæˆæœ¬ã€‚ |
| **Render** | å¾Œç«¯ (`server` è³‡æ–™å¤¾ + SQLite) | **$0 ~ $7 ç¾é‡‘/æœˆ** | æ”¯æ´ **Disk (æŒä¹…åŒ–ç¡¬ç¢Ÿ)**ï¼Œé‡å•Ÿæ©Ÿå™¨ SQLite æª”æ¡ˆä¹Ÿä¸æœƒæ¶ˆå¤±ã€‚æ”¯æ´å°‡ä½ çš„ `Dockerfile` ä¸€éµè·‘èµ·ä¾†ã€‚ |

ğŸ¯ **æˆæœ**ï¼šç¨‹å¼ç¢¼åªå­˜åœ¨ä½ è‡ªå·±çš„ GitHub ä¸Šï¼Œå®¢æˆ¶å®Œå…¨ç¢°ä¸åˆ°ï¼›ä½ éš¨æ™‚å¯ä»¥é›¢è·å¸¶èµ°é€™å¥—ç³»çµ±ç¹¼çºŒè³ºéŒ¢ã€‚

---

## éƒ¨ç½²æµç¨‹æ¦‚è¿°

### æ­¥é©Ÿ 1ï¼šæº–å‚™ GitHub å„²å­˜åº«
1. åœ¨ä½ è‡ªå·±çš„ GitHub å¸³è™Ÿå»ºç«‹ä¸€å€‹ Private (ç§æœ‰) å„²å­˜åº«ã€‚
2. å°‡ç›®å‰çš„ `AI_WMS_2.0` å®Œæ•´ç¨‹å¼ç¢¼ Push ä¸Šå»ã€‚

---

### æ­¥é©Ÿ 2ï¼šéƒ¨ç½²å‰ç«¯ (Vercel)
Vercel æ¥ç®¡ä½ æ‰“åŒ…å¥½çš„ç¶²é ç•«é¢ï¼Œä¸¦è² è²¬è™•ç†ä½ æƒ³é–‹çµ¦ä¸åŒå®¢æˆ¶çš„ã€Œå°ˆå±¬ç¶²å€ã€ã€‚

1. å‰å¾€ [Vercel](https://vercel.com/) è¨»å†Šä¸¦ç¶å®š GitHubã€‚
2. é»æ“Š **"Add New Project"**ï¼Œé¸æ“‡å‰›å‰›ä¸Šå‚³çš„ Git Repoã€‚
3. **é‡è¦è¨­å®š (Build & Development Settings)**:
   - Framework Preset: é¸æ“‡ `Vite` (Vercel é€šå¸¸æœƒè‡ªå‹•åµæ¸¬åˆ°)
   - Root Directory: è¼¸å…¥ `client` ï¼ˆå‘Šè¨´ Vercel å‰ç«¯ç¨‹å¼ç¢¼åœ¨é€™å€‹è³‡æ–™å¤¾ï¼‰
   - Build Command: `npm run build`
   - Output Directory: `dist`
4. é»æ“Š **Deploy**ã€‚ä¸ç”¨å¹¾åˆ†é˜ï¼ŒVercel å°±æœƒçµ¦ä½ ä¸€å€‹è¶…é•·çš„ç¶²å€ï¼Œä½ çš„å‰ç«¯å°±ä¸Šç·šäº†ï¼

#### ğŸ‘‰ å¦‚ä½•ç¶å®šå®¢æˆ¶å°ˆå±¬ç¶²å€ï¼Ÿ (è²·ç¶²åŸŸå¾Œ)
å» Vercel çš„å°ˆæ¡ˆè¨­å®š > **Domains**ï¼š
- è¼¸å…¥ `companya.ä½ çš„ç¶²åŸŸ.com`
- è¼¸å…¥ `companyb.ä½ çš„ç¶²åŸŸ.com`
Vercel æœƒå¼•å°ä½ å›ä½ çš„ç¶²åŸŸå•† (å¦‚ GoDaddy) è¨­å®š `CNAME` ç´€éŒ„æŒ‡å‘ Vercelã€‚è¨­å®šå®Œå¾Œï¼Œå®¢æˆ¶å°±èƒ½ç”¨ä»–å€‘å°ˆå±¬çš„ç¶²å€é€£é€²ä½ çš„ç³»çµ±ã€‚

---

### æ­¥é©Ÿ 3ï¼šéƒ¨ç½²å¾Œç«¯ (Render)
å¾Œç«¯æ˜¯æ•´å€‹ç³»çµ±çš„æ ¸å¿ƒå‘½è„ˆï¼Œå› ç‚º SQLite è³‡æ–™åº«åœ¨é€™è£¡ã€‚**é—œéµæ˜¯è¦æ›è¼‰ Disk (ç¡¬ç¢Ÿ)**ã€‚

1. å‰å¾€ [Render.com](https://render.com/) è¨»å†Šä¸¦ç¶å®š GitHubã€‚
2. é»æ“Š **"New +" -> "Web Service"**ã€‚
3. é¸æ“‡ä½ çš„ Git Repoã€‚
4. **é‡è¦è¨­å®š (Settings)**:
   - Root Directory: è¼¸å…¥ `server`
   - Environment: é¸æ“‡ `Docker` ï¼ˆRender æœƒè‡ªå‹•æŠ“ä½ çš„ `Dockerfile` æŠŠç’°å¢ƒå»ºèµ·ä¾†ï¼‰
   - Instance Type: åˆæœŸé¸ **Free ($0/month)**ï¼Œå¦‚æœæœ‰å¯¦éš›å®¢æˆ¶ä¸Šç·šå¾Œï¼Œå¼·çƒˆå»ºè­°å‡ç´šåˆ° **Starter ($7/month)**ï¼Œæ•ˆèƒ½æ›´ç©©ã€‚
5. ğŸ†˜ **æ¥µåº¦é‡è¦ï¼šè¨­å®šæŒä¹…åŒ–ç¡¬ç¢Ÿ (Disks)**
   - å¾€ä¸‹æ»‘æ‰¾åˆ° **"Disks"** å€å¡Šï¼Œé»æ“Š "Add Disk"ã€‚
   - **Name**: è¼¸å…¥ `sqlite-data`
   - **Mount Path**: å¡«å¯«ä½ åœ¨ Dockerfile è£¡é¢å­˜ SQLite çš„çµ•å°è·¯å¾‘ï¼Œä¾‹å¦‚ï¼š`/app/server/database.sqlite` (è¦–ä½ ç¨‹å¼ç¢¼æ€éº¼è£è€Œå®š)ã€‚
   - *ï¼ˆé€™é¡†ç¡¬ç¢Ÿç¢ºä¿äº†å°±ç®— Render å…è²»æ–¹æ¡ˆæœƒä¼‘çœ é‡é–‹æ©Ÿï¼Œä½ å·¥å» å®¢æˆ¶çš„å¹¾åè¬ç­†é€²éŠ·å­˜è³‡æ–™éƒ½ä¸æœƒè’¸ç™¼ï¼ï¼‰*
6. é»æ“Š **Create Web Service**ï¼Œç­‰å®ƒè·‘åˆ°å‡ºç¾ç¶ è‰² `Live` å³ä»£è¡¨å¾Œç«¯ä¸Šç·šæ‹‰ï¼

---

## æ¶æ§‹èª¿æ•´å¿ƒæ³•ï¼šå¦‚ä½•åˆ†è¾¨æ˜¯å“ªå®¶å®¢æˆ¶ï¼Ÿ (é‚è¼¯éš”é›¢)

å› ç‚ºç¾åœ¨å¾Œç«¯åªæœ‰ã€Œä¸€å°æ©Ÿå™¨ã€åœ¨è·‘ï¼Œæ‰€æœ‰å®¢æˆ¶ (A å» ã€B å» ) çš„è³‡æ–™éƒ½æœƒå¯«é€²åŒä¸€å€‹ SQLite æª”æ¡ˆè£¡ã€‚
ç‚ºäº†é¿å… A å» çš„äººæŸ¥åº«å­˜çœ‹åˆ° B å» çš„è²¨ï¼Œä½ å¿…é ˆç¨å¾®ä¿®æ”¹ç¨‹å¼ç¢¼ï¼š

### 1. è³‡æ–™åº«åŠ ä¸Šæ¨™ç±¤ (Server)
åœ¨ä½ çš„ SQLite æ‰€æœ‰è³‡æ–™è¡¨ (Table) æ–°å¢ä¸€å€‹æ¬„ä½å«åš `company_id`ã€‚
- A å» å­˜é€²å»çš„å•†å“ï¼Œ`company_id = 'A'`
- B å» å­˜é€²å»çš„å•†å“ï¼Œ`company_id = 'B'`

### 2. å‰ç«¯å·å¡æ¨™ç±¤ (Client)
ç•¶ A å» çš„å“¡å·¥ç”¨ `companya.ä½ çš„ç¶²åŸŸ.com` é–‹å•Ÿç¶²é æ™‚ï¼Œä½ çš„ React/Vite å‰ç«¯å»è®€ç¶²å€ (`window.location.hostname`)ã€‚
ç™¼ç¾æ˜¯ A å» ï¼Œå°±åœ¨å‘¼å«æ‰€æœ‰ API çš„æ™‚å€™ï¼ŒæŠŠ `company_id = A` å¡é€²å»ã€‚

```javascript
// å‰ç«¯ç™¼é€è«‹æ±‚æ™‚
axios.get('/api/inventory', {
  headers: { 'X-Company-Id': 'A' }
});
```

### 3. å¾Œç«¯ API æŠŠé–€çœ‹ç·Š (Server)
å¾Œç«¯çš„æ¯ä¸€æ”¯ APIï¼Œæ”¶åˆ°è«‹æ±‚ç¬¬ä¸€ä»¶äº‹å°±æ˜¯çœ‹ä»–æ˜¯å“ªå®¶å…¬å¸ï¼Œä¸¦ä¸”**åªå›å‚³é‚£å®¶å…¬å¸çš„è³‡æ–™**ã€‚

```javascript
// å¾Œç«¯ Express è™•ç†è«‹æ±‚
app.get('/api/inventory', (req, res) => {
  const companyId = req.headers['x-company-id'];
  
  // é—œéµï¼šWHERE æ¢ä»¶æ°¸é è¦åŠ ä¸Š company_idï¼
  const data = db.prepare('SELECT * FROM inventory WHERE company_id = ?').all(companyId);
  res.json(data);
});
```

---

## çµè«–

é€™å¥— **ã€ŒVercel (å‰ç«¯) + Render (å¾Œç«¯ VPS)ã€** çš„çµ„åˆæ‹³ï¼š
1. **0 å…ƒå‰µæ¥­**ï¼šå‰æœŸè‡ªå·±æ¸¬è©¦å®Œå…¨å…è²»ã€‚
2. **è²¡å¯Œè‡ªç”±**ï¼šç¨‹å¼ç¢¼éƒ½åœ¨ä½ å€‹äººçš„ GitHub ä¸Šï¼Œå®Œå…¨è„«é›¢å…¬å¸å¯¦é«”ä¸»æ©Ÿçš„ç¶æ¶ã€‚
3. **ç„¡ç—›å‡ç´š**ï¼šç•¶ä½ æ”¹äº† Bugï¼Œåªè¦ `git push` ä¸Š GitHubï¼ŒVercel å’Œ Render éƒ½æœƒè‡ªå‹•å¹«ä½ é‡æ–°æ‰“åŒ…ä½ˆç½²ï¼Œæ‰€æœ‰å¹¾åå®¶å®¢æˆ¶éƒ½æœƒç¬é–“æ›´æ–°åˆ°æœ€æ–°ç‰ˆï¼
